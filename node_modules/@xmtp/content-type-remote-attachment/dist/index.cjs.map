{"version":3,"file":"index.cjs","sources":["../src/Attachment.ts","../src/encryption/Ciphertext.ts","../src/encryption/crypto.ts","../src/encryption/encryption.ts","../src/RemoteAttachment.ts"],"sourcesContent":[null,null,null,null,null],"names":["ContentTypeId","ciphertext","webcrypto","secp","proto"],"mappings":"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"}